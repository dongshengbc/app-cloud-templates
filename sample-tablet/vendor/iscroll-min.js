(function(){var e=Math,s=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":"opera" in window?"O":"",n="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),k="ontouchstart" in window,c=s+"Transform" in document.documentElement.style,p=(/android/gi).test(navigator.appVersion),r=(/iphone|ipad/gi).test(navigator.appVersion),a=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m){window.setTimeout(m,17)}})(),o="onorientationchange" in window?"orientationchange":"resize",g=k?"touchstart":"mousedown",f=k?"touchmove":"mousemove",h=k?"touchend":"mouseup",d=k?"touchcancel":"mouseup",q=s=="Moz"?"DOMMouseScroll":"mousewheel",b="translate"+(n?"3d(":"("),j=n?",0)":")",t=function(v,m){var w=this,x=document,u;w.wrapper=typeof v=="object"?v:x.getElementById(v);w.wrapper.style.overflow="hidden";w.scroller=w.wrapper.children[0];w.options={hScroll:true,vScroll:true,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:p,hideScrollbar:r,fadeScrollbar:r&&n,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(y){y.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(u in m){w.options[u]=m[u]}w.options.useTransform=c?w.options.useTransform:false;w.options.hScrollbar=w.options.hScroll&&w.options.hScrollbar;w.options.vScrollbar=w.options.vScroll&&w.options.vScrollbar;w.options.zoom=w.options.useTransform&&w.options.zoom;w.scroller.style[s+"TransitionProperty"]=w.options.useTransform?"-"+s.toLowerCase()+"-transform":"top left";w.scroller.style[s+"TransitionDuration"]="0";w.scroller.style[s+"TransformOrigin"]="0 0";if(w.options.useTransform){w.scroller.style[s+"Transform"]=b+"0,0"+j}else{w.scroller.style.cssText+=";top:0;left:0"}w.refresh();w._bind(o,window);if(!k){w._bind("mouseout",w.wrapper)}w._bind(g);w._bind(q)};t.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],handleEvent:function(u){var m=this;switch(u.type){case g:m._start(u);break;case f:m._move(u);break;case h:case d:m._end(u);break;case o:m._resize();break;case q:m._wheel(u);break;case"mouseout":m._mouseout(u);break}},_scrollbar:function(m){var v=this,w=document,u;if(!v[m+"Scrollbar"]){if(v[m+"ScrollbarWrapper"]){if(c){v[m+"ScrollbarIndicator"].style[s+"Transform"]=""}v[m+"ScrollbarWrapper"].parentNode.removeChild(v[m+"ScrollbarWrapper"]);v[m+"ScrollbarWrapper"]=null;v[m+"ScrollbarIndicator"]=null}return}if(!v[m+"ScrollbarWrapper"]){u=w.createElement("div");if(v.options.scrollbarClass){u.className=v.options.scrollbarClass+m.toUpperCase()}else{u.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(v.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(v.hScrollbar?"7":"2")+"px;top:2px;right:1px")}u.style.cssText+=";pointer-events:none;-"+s+"-transition-property:opacity;-"+s+"-transition-duration:"+(v.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(v.options.hideScrollbar?"0":"1");v.wrapper.appendChild(u);v[m+"ScrollbarWrapper"]=u;u=w.createElement("div");if(!v.options.scrollbarClass){u.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+s+"-background-clip:padding-box;-"+s+"-box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";-"+s+"-border-radius:3px;border-radius:3px"}u.style.cssText+=";pointer-events:none;-"+s+"-transition-property:-"+s+"-transform;-"+s+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+s+"-transition-duration:0;-"+s+"-transform:"+b+"0,0"+j;v[m+"ScrollbarWrapper"].appendChild(u);v[m+"ScrollbarIndicator"]=u}if(m=="h"){v.hScrollbarSize=v.hScrollbarWrapper.clientWidth;v.hScrollbarIndicatorSize=e.max(e.round(v.hScrollbarSize*v.hScrollbarSize/v.scrollerW),8);v.hScrollbarIndicator.style.width=v.hScrollbarIndicatorSize+"px";v.hScrollbarMaxScroll=v.hScrollbarSize-v.hScrollbarIndicatorSize;v.hScrollbarProp=v.hScrollbarMaxScroll/v.maxScrollX}else{v.vScrollbarSize=v.vScrollbarWrapper.clientHeight;v.vScrollbarIndicatorSize=e.max(e.round(v.vScrollbarSize*v.vScrollbarSize/v.scrollerH),8);v.vScrollbarIndicator.style.height=v.vScrollbarIndicatorSize+"px";v.vScrollbarMaxScroll=v.vScrollbarSize-v.vScrollbarIndicatorSize;v.vScrollbarProp=v.vScrollbarMaxScroll/v.maxScrollY}v._scrollbarPos(m,true)},_resize:function(){this.refresh()},_pos:function(m,u){m=this.hScroll?m:0;u=this.vScroll?u:0;if(this.options.useTransform){this.scroller.style[s+"Transform"]=b+m+"px,"+u+"px"+j+" scale("+this.scale+")"}else{m=e.round(m);u=e.round(u);this.scroller.style.left=m+"px";this.scroller.style.top=u+"px"}this.x=m;this.y=u;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,w){var v=this,x=m=="h"?v.x:v.y,u;if(!v[m+"Scrollbar"]){return}x=v[m+"ScrollbarProp"]*x;if(x<0){if(!v.options.fixedScrollbar){u=v[m+"ScrollbarIndicatorSize"]+e.round(x*3);if(u<8){u=8}v[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=u+"px"}x=0}else{if(x>v[m+"ScrollbarMaxScroll"]){if(!v.options.fixedScrollbar){u=v[m+"ScrollbarIndicatorSize"]-e.round((x-v[m+"ScrollbarMaxScroll"])*3);if(u<8){u=8}v[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=u+"px";x=v[m+"ScrollbarMaxScroll"]+(v[m+"ScrollbarIndicatorSize"]-u)}else{x=v[m+"ScrollbarMaxScroll"]}}}v[m+"ScrollbarWrapper"].style[s+"TransitionDelay"]="0";v[m+"ScrollbarWrapper"].style.opacity=w&&v.options.hideScrollbar?"0":"1";v[m+"ScrollbarIndicator"].style[s+"Transform"]=b+(m=="h"?x+"px,0":"0,"+x+"px")+j},_start:function(B){var A=this,u=k?B.touches[0]:B,v,m,C,z,w;if(!A.enabled){return}if(A.options.onBeforeScrollStart){A.options.onBeforeScrollStart.call(A,B)}A.moved=false;A.animating=false;A.zoomed=false;A.distX=0;A.distY=0;A.absDistX=0;A.absDistY=0;A.dirX=0;A.dirY=0;if(A.options.zoom&&k&&B.touches.length>1){z=e.abs(B.touches[0].pageX-B.touches[1].pageX);w=e.abs(B.touches[0].pageY-B.touches[1].pageY);A.touchesDistStart=e.sqrt(z*z+w*w);A.originX=e.abs(B.touches[0].pageX+B.touches[1].pageX-A.wrapperOffsetLeft*2)/2-A.x;A.originY=e.abs(B.touches[0].pageY+B.touches[1].pageY-A.wrapperOffsetTop*2)/2-A.y}if(A.options.momentum){if(A.options.useTransform){v=getComputedStyle(A.scroller,null)[s+"Transform"].replace(/[^0-9-.,]/g,"").split(",");m=v[4]*1;C=v[5]*1}else{m=getComputedStyle(A.scroller,null).left.replace(/[^0-9-]/g,"")*1;C=getComputedStyle(A.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(m!=A.x||C!=A.y){A.steps=[];A._pos(m,C)}}A.absStartX=A.x;A.absStartY=A.y;A.startX=A.x;A.startY=A.y;A.pointX=u.pageX;A.pointY=u.pageY;A.startTime=B.timeStamp||(new Date()).getTime();if(A.options.onScrollStart){A.options.onScrollStart.call(A,B)}A._bind(f);A._bind(h);A._bind(d)},_move:function(B){var z=this,C=k?B.touches[0]:B,x=C.pageX-z.pointX,v=C.pageY-z.pointY,m=z.x+x,D=z.y+v,y,w,u,A=B.timeStamp||(new Date()).getTime();if(z.options.onBeforeScrollMove){z.options.onBeforeScrollMove.call(z,B)}if(z.options.zoom&&k&&B.touches.length>1){y=e.abs(B.touches[0].pageX-B.touches[1].pageX);w=e.abs(B.touches[0].pageY-B.touches[1].pageY);z.touchesDist=e.sqrt(y*y+w*w);z.zoomed=true;u=1/z.touchesDistStart*z.touchesDist*this.scale;if(u<0.5){u=0.5}else{if(u>z.options.zoomMax){u=z.options.zoomMax}}z.lastScale=u/this.scale;m=this.originX-this.originX*z.lastScale+this.x,D=this.originY-this.originY*z.lastScale+this.y;this.scroller.style[s+"Transform"]=b+m+"px,"+D+"px"+j+" scale("+u+")";return}z.pointX=C.pageX;z.pointY=C.pageY;if(m>0||m<z.maxScrollX){m=z.options.bounce?z.x+(x/2):m>=0||z.maxScrollX>=0?0:z.maxScrollX}if(D>0||D<z.maxScrollY){D=z.options.bounce?z.y+(v/2):D>=0||z.maxScrollY>=0?0:z.maxScrollY}if(z.absDistX<6&&z.absDistY<6){z.distX+=x;z.distY+=v;z.absDistX=e.abs(z.distX);z.absDistY=e.abs(z.distY);return}if(z.options.lockDirection){if(z.absDistX>z.absDistY+5){D=z.y;v=0}else{if(z.absDistY>z.absDistX+5){m=z.x;x=0}}}z.moved=true;z._pos(m,D);z.dirX=x>0?-1:x<0?1:0;z.dirY=v>0?-1:v<0?1:0;if(A-z.startTime>300){z.startTime=A;z.startX=z.x;z.startY=z.y}if(z.options.onScrollMove){z.options.onScrollMove.call(z,B)}},_end:function(z){if(k&&z.touches.length!=0){return}var x=this,F=k?z.changedTouches[0]:z,A,E,v={dist:0,time:0},m={dist:0,time:0},w=(z.timeStamp||(new Date()).getTime())-x.startTime,B=x.x,y=x.y,D,C,u;x._unbind(f);x._unbind(h);x._unbind(d);if(x.options.onBeforeTouchEnd){x.options.onBeforeTouchEnd.call(x,z)}if(x.zoomed){x.scale=x.scale*x.lastScale;x.x=x.originX-x.originX*x.lastScale+x.x;x.y=x.originY-x.originY*x.lastScale+x.y;x.scroller.style.webkitTransform=b+x.x+"px,"+x.y+"px"+j+" scale("+x.scale+")";x.refresh();return}if(!x.moved){if(k){if(x.doubleTapTimer&&x.options.zoom){clearTimeout(x.doubleTapTimer);x.doubleTapTimer=null;x.zoom(x.pointX,x.pointY,x.scale==1?x.options.doubleTapZoom:1)}else{x.doubleTapTimer=setTimeout(function(){x.doubleTapTimer=null;A=F.target;while(A.nodeType!=1){A=A.parentNode}if(A.tagName!="SELECT"&&A.tagName!="INPUT"&&A.tagName!="TEXTAREA"){E=document.createEvent("MouseEvents");E.initMouseEvent("click",true,true,z.view,1,F.screenX,F.screenY,F.clientX,F.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,0,null);E._fake=true;A.dispatchEvent(E)}},x.options.zoom?250:0)}}x._resetPos(200);if(x.options.onTouchEnd){x.options.onTouchEnd.call(x,z)}return}if(w<300&&x.options.momentum){v=B?x._momentum(B-x.startX,w,-x.x,x.scrollerW-x.wrapperW+x.x,x.options.bounce?x.wrapperW:0):v;m=y?x._momentum(y-x.startY,w,-x.y,(x.maxScrollY<0?x.scrollerH-x.wrapperH+x.y:0),x.options.bounce?x.wrapperH:0):m;B=x.x+v.dist;y=x.y+m.dist;if((x.x>0&&B>0)||(x.x<x.maxScrollX&&B<x.maxScrollX)){v={dist:0,time:0}}if((x.y>0&&y>0)||(x.y<x.maxScrollY&&y<x.maxScrollY)){m={dist:0,time:0}}}if(v.dist||m.dist){u=e.max(e.max(v.time,m.time),10);if(x.options.snap){D=B-x.absStartX;C=y-x.absStartY;if(e.abs(D)<x.options.snapThreshold&&e.abs(C)<x.options.snapThreshold){x.scrollTo(x.absStartX,x.absStartY,200)}else{snap=x._snap(B,y);B=snap.x;y=snap.y;u=e.max(snap.time,u)}}x.scrollTo(B,y,u);if(x.options.onTouchEnd){x.options.onTouchEnd.call(x,z)}return}if(x.options.snap){D=B-x.absStartX;C=y-x.absStartY;if(e.abs(D)<x.options.snapThreshold&&e.abs(C)<x.options.snapThreshold){x.scrollTo(x.absStartX,x.absStartY,200)}else{snap=x._snap(x.x,x.y);if(snap.x!=x.x||snap.y!=x.y){x.scrollTo(snap.x,snap.y,snap.time)}}if(x.options.onTouchEnd){x.options.onTouchEnd.call(x,z)}return}x._resetPos(200);if(x.options.onTouchEnd){x.options.onTouchEnd.call(x,z)}},_resetPos:function(v){var m=this,w=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,u=m.y>=0||m.maxScrollY>0?0:m.y<m.maxScrollY?m.maxScrollY:m.y;if(w==m.x&&u==m.y){if(m.moved){if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}m.moved=false}if(m.hScrollbar&&m.options.hideScrollbar){if(s=="webkit"){m.hScrollbarWrapper.style[s+"TransitionDelay"]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(s=="webkit"){m.vScrollbarWrapper.style[s+"TransitionDelay"]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(w,u,v||0)},_wheel:function(w){var v=this,u,m;if("wheelDeltaX" in w){u=v.x+w.wheelDeltaX/12,m=v.y+w.wheelDeltaY/12}else{if("detail" in w){u=v.x-w.detail*3,m=v.y-w.detail*3}else{u=v.x-w.wheelDelta,m=v.y-w.wheelDelta}}if(u>0){u=0}else{if(u<v.maxScrollX){u=v.maxScrollX}}if(m>0){m=0}else{if(m<v.maxScrollY){m=v.maxScrollY}}v.scrollTo(u,m,0)},_mouseout:function(u){var m=u.relatedTarget;if(!m){this._end(u);return}while(m=m.parentNode){if(m==this.wrapper){return}}this._end(u)},_startAni:function(){var z=this,u=z.x,m=z.y,x=(new Date).getTime(),y,w;if(z.animating){return}if(!z.steps.length){z._resetPos(200);return}y=z.steps.shift();if(y.x==u&&y.y==m){y.time=0}z.animating=true;z.moved=true;(function v(){var A=(new Date).getTime(),C,B;if(A>=x+y.time){z._pos(y.x,y.y);z.animating=false;if(z.options.onAnimationEnd){z.options.onAnimationEnd.call(z)}z._startAni();return}A=(A-x)/y.time-1;w=e.sqrt(1-A*A);C=(y.x-u)*w+u;B=(y.y-m)*w+m;z._pos(C,B);if(z.animating){a(v)}})()},_momentum:function(A,u,y,m,C){var z=0.0006,v=e.abs(A)/u,w=(v*v)/(2*z),B=0,x=0;if(A>0&&w>y){x=C/(6/(w/v*z));y=y+x;v=v*y/w;w=y}else{if(A<0&&w>m){x=C/(6/(w/v*z));m=m+x;v=v*m/w;w=m}}w=w*(A<0?-1:1);B=v/z;return{dist:w,time:e.round(B)}},_offset:function(m){var v=-m.offsetLeft,u=-m.offsetTop;while(m=m.offsetParent){v-=m.offsetLeft;u-=m.offsetTop}return{left:v,top:u}},_snap:function(D,C){var A=this,z,w,B,v,u,m;B=A.pagesX.length-1;for(z=0,w=A.pagesX.length;z<w;z++){if(D>=A.pagesX[z]){B=z;break}}if(B==A.currPageX&&B>0&&A.dirX<0){B--}D=A.pagesX[B];u=e.abs(D-A.pagesX[A.currPageX]);u=u?e.abs(A.x-D)/u*500:0;A.currPageX=B;B=A.pagesY.length-1;for(z=0;z<B;z++){if(C>=A.pagesY[z]){B=z;break}}if(B==A.currPageY&&B>0&&A.dirY<0){B--}C=A.pagesY[B];m=e.abs(C-A.pagesY[A.currPageY]);m=m?e.abs(A.y-C)/m*500:0;A.currPageY=B;v=e.round(e.max(u,m))||200;return{x:D,y:C,time:v}},_bind:function(v,u,m){(u||this.scroller).addEventListener(v,this,!!m)},_unbind:function(v,u,m){(u||this.scroller).removeEventListener(v,this,!!m)},destroy:function(){var m=this;m.scroller.style[s+"Transform"]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(o);m._unbind(g);m._unbind(f);m._unbind(h);m._unbind(d);m._unbind("mouseout",m.wrapper);m._unbind(q);if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var m=this,v,w=0,u=0;if(m.scale<m.options.zoomMin){m.scale=m.options.zoomMin}m.wrapperW=m.wrapper.clientWidth;m.wrapperH=m.wrapper.clientHeight;if(!m.wrapperW||!m.wrapperH){m.disable();return}m.scrollerW=e.round(m.scroller.offsetWidth*m.scale);m.scrollerH=e.round(m.scroller.offsetHeight*m.scale);m.maxScrollX=m.wrapperW-m.scrollerW;m.maxScrollY=m.wrapperH-m.scrollerH;m.dirX=0;m.dirY=0;m.hScroll=m.options.hScroll&&m.maxScrollX<0;m.vScroll=m.options.vScroll&&(!m.options.bounceLock&&!m.hScroll||m.scrollerH>m.wrapperH);m.hScrollbar=m.hScroll&&m.options.hScrollbar;m.vScrollbar=m.vScroll&&m.options.vScrollbar&&m.scrollerH>m.wrapperH;v=m._offset(m.wrapper);m.wrapperOffsetLeft=-v.left;m.wrapperOffsetTop=-v.top;if(typeof m.options.snap=="string"){m.pagesX=[];m.pagesY=[];els=m.scroller.querySelectorAll(m.options.snap);for(i=0,l=els.length;i<l;i++){w=m._offset(els[i]);w.left+=m.wrapperOffsetLeft;w.top+=m.wrapperOffsetTop;m.pagesX[i]=w.left<m.maxScrollX?m.maxScrollX:w.left*m.scale;m.pagesY[i]=w.top<m.maxScrollY?m.maxScrollY:w.top*m.scale}}else{if(m.options.snap){m.pagesX=[];while(w>=m.maxScrollX){m.pagesX[u]=w;w=w-m.wrapperW;u++}if(m.maxScrollX%m.wrapperW){m.pagesX[m.pagesX.length]=m.maxScrollX-m.pagesX[m.pagesX.length-1]+m.pagesX[m.pagesX.length-1]}w=0;u=0;m.pagesY=[];while(w>=m.maxScrollY){m.pagesY[u]=w;w=w-m.wrapperH;u++}if(m.maxScrollY%m.wrapperH){m.pagesY[m.pagesY.length]=m.maxScrollY-m.pagesY[m.pagesY.length-1]+m.pagesY[m.pagesY.length-1]}}}m._scrollbar("h");m._scrollbar("v");m.scroller.style[s+"TransitionDuration"]="0";m._resetPos(200)},scrollTo:function(m,C,B,A){var z=this,w=m,v,u;if(!w.length){w=[{x:m,y:C,time:B,relative:A}]}for(v=0,u=w.length;v<u;v++){if(w[v].relative){w[v].x=z.x-w[v].x;w[v].y=z.y-w[v].y}z.steps.push({x:w[v].x,y:w[v].y,time:w[v].time||0})}z._startAni()},scrollToElement:function(m,v){var u=this,w;m=m.nodeType?m:u.scroller.querySelector(m);if(!m){return}w=u._offset(m);w.left+=u.wrapperOffsetLeft;w.top+=u.wrapperOffsetTop;w.left=w.left>0?0:w.left<u.maxScrollX?u.maxScrollX:w.left;w.top=w.top>0?0:w.top<u.maxScrollY?u.maxScrollY:w.top;v=v===undefined?e.max(e.abs(w.x)*2,e.abs(w.y)*2):v;u.scrollTo(w.left,w.top,v)},scrollToPage:function(v,u,z){var w=this,m,A;if(w.options.snap){v=v=="next"?w.currPageX+1:v=="prev"?w.currPageX-1:v;u=u=="next"?w.currPageY+1:u=="prev"?w.currPageY-1:u;v=v<0?0:v>w.pagesX.length-1?w.pagesX.length-1:v;u=u<0?0:u>w.pagesY.length-1?w.pagesY.length-1:u;w.currPageX=v;w.currPageY=u;m=w.pagesX[v];A=w.pagesY[u]}else{m=-w.wrapperW*v;A=-w.wrapperH*u;if(m<w.maxScrollX){m=w.maxScrollX}if(A<w.maxScrollY){A=w.maxScrollY}}w.scrollTo(m,A,z||400)},disable:function(){this.enabled=false;this._unbind(f);this._unbind(h);this._unbind(d)},enable:function(){this.enabled=true},stop:function(){this.steps=[];this.moved=false;this.animating=false;this._resetPos(200)},zoom:function(m,A,z,w){var u=this,v=z/u.scale;if(!u.options.useTransform){return}w=(w||200)+"ms";m=m-u.wrapperOffsetLeft-u.x;A=A-u.wrapperOffsetTop-u.y;u.x=m-m*v+u.x;u.y=A-A*v+u.y;u.scale=z;u.scroller.style[s+"TransitionDuration"]=w;u.scroller.style[s+"Transform"]=b+u.x+"px,"+u.y+"px"+j+" scale("+z+")";u.refresh()}};if(typeof exports!=="undefined"){exports.iScroll=t}else{window.iScroll=t}})();