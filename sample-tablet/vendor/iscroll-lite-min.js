(function(){var e=Math,p=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":"opera" in window?"O":"",k="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),j="ontouchstart" in window,c=p+"Transform" in document.documentElement.style,n=(/android/gi).test(navigator.appVersion),o=(/iphone|ipad/gi).test(navigator.appVersion),a=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m){window.setTimeout(m,17)}})(),l="onorientationchange" in window?"orientationchange":"resize",g=j?"touchstart":"mousedown",f=j?"touchmove":"mousemove",h=j?"touchend":"mouseup",d=j?"touchcancel":"mouseup",b="translate"+(k?"3d(":"("),i=k?",0)":")",q=function(s,m){var t=this,u=document,r;t.wrapper=typeof s=="object"?s:u.getElementById(s);t.wrapper.style.overflow="hidden";t.scroller=t.wrapper.children[0];t.options={hScroll:true,vScroll:true,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:n,hideScrollbar:o,fadeScrollbar:o&&k,scrollbarClass:"",onRefresh:null,onBeforeScrollStart:function(v){v.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(r in m){t.options[r]=m[r]}t.options.useTransform=c?t.options.useTransform:false;t.options.hScrollbar=t.options.hScroll&&t.options.hScrollbar;t.options.vScrollbar=t.options.vScroll&&t.options.vScrollbar;t.options.zoom=t.options.useTransform&&t.options.zoom;t.scroller.style[p+"TransitionProperty"]=t.options.useTransform?"-"+p.toLowerCase()+"-transform":"top left";t.scroller.style[p+"TransitionDuration"]="0";t.scroller.style[p+"TransformOrigin"]="0 0";if(t.options.useTransform){t.scroller.style[p+"Transform"]=b+"0,0"+i}else{t.scroller.style.cssText+=";top:0;left:0"}t.refresh();t._bind(l,window);if(!j){t._bind("mouseout",t.wrapper)}t._bind(g)};q.prototype={enabled:true,x:0,y:0,steps:[],scale:1,handleEvent:function(r){var m=this;switch(r.type){case g:m._start(r);break;case f:m._move(r);break;case h:case d:m._end(r);break;case l:m._resize();break;case"mouseout":m._mouseout(r);break}},_scrollbar:function(m){var s=this,t=document,r;if(!s[m+"Scrollbar"]){if(s[m+"ScrollbarWrapper"]){if(c){s[m+"ScrollbarIndicator"].style[p+"Transform"]=""}s[m+"ScrollbarWrapper"].parentNode.removeChild(s[m+"ScrollbarWrapper"]);s[m+"ScrollbarWrapper"]=null;s[m+"ScrollbarIndicator"]=null}return}if(!s[m+"ScrollbarWrapper"]){r=t.createElement("div");if(s.options.scrollbarClass){r.className=s.options.scrollbarClass+m.toUpperCase()}else{r.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(s.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(s.hScrollbar?"7":"2")+"px;top:2px;right:1px")}r.style.cssText+=";pointer-events:none;-"+p+"-transition-property:opacity;-"+p+"-transition-duration:"+(s.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(s.options.hideScrollbar?"0":"1");s.wrapper.appendChild(r);s[m+"ScrollbarWrapper"]=r;r=t.createElement("div");if(!s.options.scrollbarClass){r.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+p+"-background-clip:padding-box;-"+p+"-box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";-"+p+"-border-radius:3px;border-radius:3px"}r.style.cssText+=";pointer-events:none;-"+p+"-transition-property:-"+p+"-transform;-"+p+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+p+"-transition-duration:0;-"+p+"-transform:"+b+"0,0"+i;s[m+"ScrollbarWrapper"].appendChild(r);s[m+"ScrollbarIndicator"]=r}if(m=="h"){s.hScrollbarSize=s.hScrollbarWrapper.clientWidth;s.hScrollbarIndicatorSize=e.max(e.round(s.hScrollbarSize*s.hScrollbarSize/s.scrollerW),8);s.hScrollbarIndicator.style.width=s.hScrollbarIndicatorSize+"px";s.hScrollbarMaxScroll=s.hScrollbarSize-s.hScrollbarIndicatorSize;s.hScrollbarProp=s.hScrollbarMaxScroll/s.maxScrollX}else{s.vScrollbarSize=s.vScrollbarWrapper.clientHeight;s.vScrollbarIndicatorSize=e.max(e.round(s.vScrollbarSize*s.vScrollbarSize/s.scrollerH),8);s.vScrollbarIndicator.style.height=s.vScrollbarIndicatorSize+"px";s.vScrollbarMaxScroll=s.vScrollbarSize-s.vScrollbarIndicatorSize;s.vScrollbarProp=s.vScrollbarMaxScroll/s.maxScrollY}s._scrollbarPos(m,true)},_resize:function(){this.refresh()},_pos:function(m,r){m=this.hScroll?m:0;r=this.vScroll?r:0;if(this.options.useTransform){this.scroller.style[p+"Transform"]=b+m+"px,"+r+"px"+i+" scale("+this.scale+")"}else{m=e.round(m);r=e.round(r);this.scroller.style.left=m+"px";this.scroller.style.top=r+"px"}this.x=m;this.y=r;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,t){var s=this,u=m=="h"?s.x:s.y,r;if(!s[m+"Scrollbar"]){return}u=s[m+"ScrollbarProp"]*u;if(u<0){if(!s.options.fixedScrollbar){r=s[m+"ScrollbarIndicatorSize"]+e.round(u*3);if(r<8){r=8}s[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=r+"px"}u=0}else{if(u>s[m+"ScrollbarMaxScroll"]){if(!s.options.fixedScrollbar){r=s[m+"ScrollbarIndicatorSize"]-e.round((u-s[m+"ScrollbarMaxScroll"])*3);if(r<8){r=8}s[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=r+"px";u=s[m+"ScrollbarMaxScroll"]+(s[m+"ScrollbarIndicatorSize"]-r)}else{u=s[m+"ScrollbarMaxScroll"]}}}s[m+"ScrollbarWrapper"].style[p+"TransitionDelay"]="0";s[m+"ScrollbarWrapper"].style.opacity=t&&s.options.hideScrollbar?"0":"1";s[m+"ScrollbarIndicator"].style[p+"Transform"]=b+(m=="h"?u+"px,0":"0,"+u+"px")+i},_start:function(u){var t=this,r=j?u.touches[0]:u,s,m,v;if(!t.enabled){return}if(t.options.onBeforeScrollStart){t.options.onBeforeScrollStart.call(t,u)}t.moved=false;t.animating=false;t.zoomed=false;t.distX=0;t.distY=0;t.absDistX=0;t.absDistY=0;t.dirX=0;t.dirY=0;if(t.options.momentum){if(t.options.useTransform){s=getComputedStyle(t.scroller,null)[p+"Transform"].replace(/[^0-9-.,]/g,"").split(",");m=s[4]*1;v=s[5]*1}else{m=getComputedStyle(t.scroller,null).left.replace(/[^0-9-]/g,"")*1;v=getComputedStyle(t.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(m!=t.x||v!=t.y){t.steps=[];t._pos(m,v)}}t.absStartX=t.x;t.absStartY=t.y;t.startX=t.x;t.startY=t.y;t.pointX=r.pageX;t.pointY=r.pageY;t.startTime=u.timeStamp||(new Date()).getTime();if(t.options.onScrollStart){t.options.onScrollStart.call(t,u)}t._bind(f);t._bind(h);t._bind(d)},_move:function(w){var t=this,r=j?w.touches[0]:w,s=r.pageX-t.pointX,m=r.pageY-t.pointY,x=t.x+s,v=t.y+m,u=w.timeStamp||(new Date()).getTime();if(t.options.onBeforeScrollMove){t.options.onBeforeScrollMove.call(t,w)}t.pointX=r.pageX;t.pointY=r.pageY;if(x>0||x<t.maxScrollX){x=t.options.bounce?t.x+(s/2):x>=0||t.maxScrollX>=0?0:t.maxScrollX}if(v>0||v<t.maxScrollY){v=t.options.bounce?t.y+(m/2):v>=0||t.maxScrollY>=0?0:t.maxScrollY}if(t.absDistX<6&&t.absDistY<6){t.distX+=s;t.distY+=m;t.absDistX=e.abs(t.distX);t.absDistY=e.abs(t.distY);return}if(t.options.lockDirection){if(t.absDistX>t.absDistY+5){v=t.y;m=0}else{if(t.absDistY>t.absDistX+5){x=t.x;s=0}}}t.moved=true;t._pos(x,v);t.dirX=s>0?-1:s<0?1:0;t.dirY=m>0?-1:m<0?1:0;if(u-t.startTime>300){t.startTime=u;t.startX=t.x;t.startY=t.y}if(t.options.onScrollMove){t.options.onScrollMove.call(t,w)}},_end:function(w){if(j&&w.touches.length!=0){return}var u=this,A=j?w.changedTouches[0]:w,x,z,s={dist:0,time:0},m={dist:0,time:0},t=(w.timeStamp||(new Date()).getTime())-u.startTime,y=u.x,v=u.y,r;u._unbind(f);u._unbind(h);u._unbind(d);if(u.options.onBeforeTouchEnd){u.options.onBeforeTouchEnd.call(u,w)}if(!u.moved){if(j){u.doubleTapTimer=null;x=A.target;while(x.nodeType!=1){x=x.parentNode}if(x.tagName!="SELECT"&&x.tagName!="INPUT"&&x.tagName!="TEXTAREA"){z=document.createEvent("MouseEvents");z.initMouseEvent("click",true,true,w.view,1,A.screenX,A.screenY,A.clientX,A.clientY,w.ctrlKey,w.altKey,w.shiftKey,w.metaKey,0,null);z._fake=true;x.dispatchEvent(z)}}u._resetPos(200);if(u.options.onTouchEnd){u.options.onTouchEnd.call(u,w)}return}if(t<300&&u.options.momentum){s=y?u._momentum(y-u.startX,t,-u.x,u.scrollerW-u.wrapperW+u.x,u.options.bounce?u.wrapperW:0):s;m=v?u._momentum(v-u.startY,t,-u.y,(u.maxScrollY<0?u.scrollerH-u.wrapperH+u.y:0),u.options.bounce?u.wrapperH:0):m;y=u.x+s.dist;v=u.y+m.dist;if((u.x>0&&y>0)||(u.x<u.maxScrollX&&y<u.maxScrollX)){s={dist:0,time:0}}if((u.y>0&&v>0)||(u.y<u.maxScrollY&&v<u.maxScrollY)){m={dist:0,time:0}}}if(s.dist||m.dist){r=e.max(e.max(s.time,m.time),10);u.scrollTo(y,v,r);if(u.options.onTouchEnd){u.options.onTouchEnd.call(u,w)}return}u._resetPos(200);if(u.options.onTouchEnd){u.options.onTouchEnd.call(u,w)}},_resetPos:function(s){var m=this,t=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,r=m.y>=0||m.maxScrollY>0?0:m.y<m.maxScrollY?m.maxScrollY:m.y;if(t==m.x&&r==m.y){if(m.moved){if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}m.moved=false}if(m.hScrollbar&&m.options.hideScrollbar){if(p=="webkit"){m.hScrollbarWrapper.style[p+"TransitionDelay"]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(p=="webkit"){m.vScrollbarWrapper.style[p+"TransitionDelay"]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(t,r,s||0)},_mouseout:function(r){var m=r.relatedTarget;if(!m){this._end(r);return}while(m=m.parentNode){if(m==this.wrapper){return}}this._end(r)},_startAni:function(){var w=this,r=w.x,m=w.y,u=(new Date).getTime(),v,t;if(w.animating){return}if(!w.steps.length){w._resetPos(200);return}v=w.steps.shift();if(v.x==r&&v.y==m){v.time=0}w.animating=true;w.moved=true;(function s(){var x=(new Date).getTime(),z,y;if(x>=u+v.time){w._pos(v.x,v.y);w.animating=false;if(w.options.onAnimationEnd){w.options.onAnimationEnd.call(w)}w._startAni();return}x=(x-u)/v.time-1;t=e.sqrt(1-x*x);z=(v.x-r)*t+r;y=(v.y-m)*t+m;w._pos(z,y);if(w.animating){a(s)}})()},_momentum:function(x,r,v,m,z){var w=0.0006,s=e.abs(x)/r,t=(s*s)/(2*w),y=0,u=0;if(x>0&&t>v){u=z/(6/(t/s*w));v=v+u;s=s*v/t;t=v}else{if(x<0&&t>m){u=z/(6/(t/s*w));m=m+u;s=s*m/t;t=m}}t=t*(x<0?-1:1);y=s/w;return{dist:t,time:e.round(y)}},_offset:function(m){var s=-m.offsetLeft,r=-m.offsetTop;while(m=m.offsetParent){s-=m.offsetLeft;r-=m.offsetTop}return{left:s,top:r}},_bind:function(s,r,m){(r||this.scroller).addEventListener(s,this,!!m)},_unbind:function(s,r,m){(r||this.scroller).removeEventListener(s,this,!!m)},destroy:function(){var m=this;m.scroller.style[p+"Transform"]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(l);m._unbind(g);m._unbind(f);m._unbind(h);m._unbind(d);m._unbind("mouseout",m.wrapper);if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var m=this,r;if(m.scale<m.options.zoomMin){m.scale=m.options.zoomMin}m.wrapperW=m.wrapper.clientWidth;m.wrapperH=m.wrapper.clientHeight;if(!m.wrapperW||!m.wrapperH){m.disable();return}m.scrollerW=e.round(m.scroller.offsetWidth*m.scale);m.scrollerH=e.round(m.scroller.offsetHeight*m.scale);m.maxScrollX=m.wrapperW-m.scrollerW;m.maxScrollY=m.wrapperH-m.scrollerH;m.dirX=0;m.dirY=0;m.hScroll=m.options.hScroll&&m.maxScrollX<0;m.vScroll=m.options.vScroll&&(!m.options.bounceLock&&!m.hScroll||m.scrollerH>m.wrapperH);m.hScrollbar=m.hScroll&&m.options.hScrollbar;m.vScrollbar=m.vScroll&&m.options.vScrollbar&&m.scrollerH>m.wrapperH;r=m._offset(m.wrapper);m.wrapperOffsetLeft=-r.left;m.wrapperOffsetTop=-r.top;m._scrollbar("h");m._scrollbar("v");m.scroller.style[p+"TransitionDuration"]="0";m._resetPos(200)},scrollTo:function(m,z,w,v){var u=this,t=m,s,r;if(!t.length){t=[{x:m,y:z,time:w,relative:v}]}for(s=0,r=t.length;s<r;s++){if(t[s].relative){t[s].x=u.x-t[s].x;t[s].y=u.y-t[s].y}u.steps.push({x:t[s].x,y:t[s].y,time:t[s].time||0})}u._startAni()},scrollToElement:function(m,s){var r=this,t;m=m.nodeType?m:r.scroller.querySelector(m);if(!m){return}t=r._offset(m);t.left+=r.wrapperOffsetLeft;t.top+=r.wrapperOffsetTop;t.left=t.left>0?0:t.left<r.maxScrollX?r.maxScrollX:t.left;t.top=t.top>0?0:t.top<r.maxScrollY?r.maxScrollY:t.top;s=s===undefined?e.max(e.abs(t.x)*2,e.abs(t.y)*2):s;r.scrollTo(t.left,t.top,s)},disable:function(){this.enabled=false;this._unbind(f);this._unbind(h);this._unbind(d)},enable:function(){this.enabled=true},stop:function(){this.steps=[];this.moved=false;this.animating=false;this._resetPos(200)}};if(typeof exports!=="undefined"){exports.iScroll=q}else{window.iScroll=q}})();